document:
  dsl: '1.0.0-alpha5'
  namespace: test
  name: oauth2-authentication-secret-password-grants
  version: '0.0.4'
do:
  - getPet:
      call: http
      with:
        method: get
        endpoint:
          uri: http://localhost:8081/hello
          authentication:
            oauth2:
              authority: http://localhost:8888/realms/test-realm/
              grant: password
              request:
                encoding: application/x-www-form-urlencoded
              client:
                id: ${ .clientId }
                secret: ${ .clientSecret }
              username: ${ .username }
              password: ${ .password }
              scopes:
                - pets:read
                - pets:write
                - pets:delete
                - pets:create
              audiences: [ serverless-workflow, another-audience, third-audience ]